/*%FSM<COMPILE "C:\Programme\Bohemia Interactive\Tools\FSM Editor Personal Edition\scriptedFSM.cfg, RUBE_AI_HELO_evacuate">*/
/*%FSM<HEAD>*/
/*
item0[] = {"init",0,4346,-39.148243,-160.574463,50.851753,-110.574471,0.000000,"init"};
item1[] = {"_",4,218,-40.002769,-78.419502,49.997231,-28.419502,0.000000,""};
item2[] = {"start_up",2,250,-40.002769,7.846375,49.997246,57.846375,0.000000,"start up"};
item3[] = {"reinforce__",4,218,99.218369,7.846367,189.218506,57.846367,1.000000,"reinforce.?"};
item4[] = {"ready",4,218,-40.856888,79.592239,49.143089,129.592239,0.000000,"ready"};
item5[] = {"move_out",2,250,-40.856873,159.025192,49.143143,209.025070,0.000000,"move out"};
item6[] = {"board_vehicle",2,250,98.364288,79.592239,188.364380,129.592239,0.000000,"board vehicle"};
item7[] = {"all_in",4,218,97.510147,158.171051,187.510162,208.171051,0.000000,"all in"};
item8[] = {"_",4,218,-10.108671,242.728775,17.540743,265.396973,0.000000,""};
item9[] = {"flying___",2,250,-40.856911,306.787567,49.143105,356.787567,0.000000,"flying..."};
item10[] = {"_",4,218,-85.271027,276.893402,-58.475731,301.269867,0.000000,""};
item11[] = {"delay_loop",2,250,-170.682556,280.309845,-103.743950,298.707489,0.000000,"delay loop"};
item12[] = {"delay",4,218,-164.703796,315.328674,-106.306358,349.100433,0.000000,"delay"};
item13[] = {"arrived",4,218,-40.002800,369.960052,49.997200,419.960052,1.000000,"arrived"};
item14[] = {"land",2,250,-40.002769,568.645325,49.997185,618.645142,0.000000,"land"};
item15[] = {"dead",4,218,88.968994,305.933594,178.968979,355.933594,4.000000,"dead"};
item16[] = {"dead__onFailure",1,250,212.816055,305.079498,302.816193,355.079498,0.000000,"dead" \n "(onFailure)"};
item17[] = {"on_ground",4,218,-38.290733,637.481750,51.709267,687.481750,0.000000,"on ground"};
item18[] = {"reinforce",2,250,-38.290699,712.661865,51.709316,762.661865,0.000000,"reinforce"};
item19[] = {"all_out",4,218,-38.233562,785.433350,51.766438,835.433350,0.000000,"all out"};
item20[] = {"evacuate",2,250,-38.290752,992.202087,51.709263,1042.201904,0.000000,"evacuate"};
item21[] = {"all_in",4,218,-37.436642,1065.656006,52.563358,1115.656250,0.000000,"all in"};
item22[] = {"fly_home",2,250,-38.224628,1267.797363,51.775387,1317.797363,0.000000,"fly home"};
item23[] = {"_",4,218,-5.768222,1336.126465,18.464703,1359.648682,0.000000,""};
item24[] = {"flying_home___",2,250,-39.078823,1381.394531,50.921185,1431.394531,0.000000,"flying home..."};
item25[] = {"_",4,218,-57.015301,1348.083984,-33.636478,1370.752197,0.000000,""};
item26[] = {"delay_loop_1",2,250,-148.405823,1347.229980,-80.612938,1370.752197,0.000000,"delay loop"};
item27[] = {"delay",4,218,-144.989380,1388.227295,-82.321205,1425.415527,0.000000,"delay"};
item28[] = {"arrived",4,218,-38.224720,1452.286377,51.775280,1502.286377,1.000000,"arrived"};
item29[] = {"land_1",2,250,-38.224667,1524.032471,51.775349,1574.032471,0.000000,"land"};
item30[] = {"on_ground",4,218,-38.224087,1594.068604,51.775913,1644.068604,0.000000,"on ground"};
item31[] = {"done__onSuccess",1,250,-35.684753,2103.317383,54.315285,2153.317383,0.000000,"done" \n "(onSuccess)"};
item32[] = {"dead",4,218,99.217644,449.423645,189.217651,499.423645,3.000000,"dead"};
item33[] = {"",7,210,254.667084,470.776489,262.667114,478.776489,0.000000,""};
item34[] = {"dead",4,218,93.242393,713.513367,183.242371,763.513367,2.000000,"dead"};
item35[] = {"",7,210,254.670624,734.012146,262.670593,742.012146,0.000000,""};
item36[] = {"dead",4,218,94.950676,993.053894,184.950684,1043.053711,2.000000,"dead"};
item37[] = {"",7,210,254.670654,1013.552673,262.670715,1021.552673,0.000000,""};
item38[] = {"dead",4,218,96.725121,1381.394531,186.725128,1431.394531,4.000000,"dead"};
item39[] = {"",7,210,254.736938,1402.747314,262.737000,1410.747559,0.000000,""};
item40[] = {"disembark",2,250,-37.368149,1814.192139,52.631882,1864.192139,0.000000,"disembark"};
item41[] = {"all_out",4,218,-37.368164,1887.646484,52.631866,1937.646484,1.000000,"all out"};
item42[] = {"dead",4,218,98.432701,1524.034912,188.432678,1574.034912,3.000000,"dead"};
item43[] = {"",7,210,255.590363,1545.387695,263.590363,1553.387695,0.000000,""};
item44[] = {"dead",4,218,96.728012,1815.046875,186.728027,1865.046875,2.000000,"dead"};
item45[] = {"",7,210,255.593933,1835.545654,263.593933,1843.545654,0.000000,""};
item46[] = {"crash",4,218,-197.301666,437.724396,-107.301720,487.724396,3.000000,"crash"};
item47[] = {"scriptDone",4,218,-354.458954,518.865112,-264.458923,568.864990,0.000000,"scriptDone"};
item48[] = {"crashed__onCrashPre",2,250,-353.605682,437.723755,-263.605652,487.723755,0.000000,"crashed" \n "(onCrashPre)"};
item49[] = {"failure__onFailure",1,250,-354.458954,597.121094,-264.458923,647.121094,0.000000,"failure" \n "(onFailure)"};
item50[] = {"crash",4,218,-157.802612,1453.994385,-67.802620,1503.994385,3.000000,"crash"};
item51[] = {"crashed__onCrashPost",2,250,-297.877991,1453.994385,-207.877991,1503.994385,0.000000,"crashed" \n "(onCrashPost)"};
item52[] = {"scriptDone",4,218,-298.297607,1526.567749,-208.297638,1576.567749,0.000000,"scriptDone"};
item53[] = {"failure__onFailure_1",1,250,-431.058075,1677.442749,-341.058014,1727.442749,0.000000,"failure" \n "(onFailure)"};
item54[] = {"update_landing_p",4,218,35.158379,221.378204,144.803192,283.335815,2.000000,"update" \n "landing pos"};
item55[] = {"reissue_command",4,218,-145.060364,198.317123,-37.978317,256.858582,2.000000,"reissue" \n "command"};
item56[] = {"onReinforce",2,250,-37.830860,861.780090,52.169155,911.780090,0.000000,"onReinforce"};
item57[] = {"scriptDone",4,218,-36.972702,928.842407,54.688225,979.753357,0.000000,"scriptDone"};
item58[] = {"onEvacuate",2,250,-38.290340,1134.635010,51.709675,1184.635010,0.000000,"onEvacuate"};
item59[] = {"scriptDone",4,218,-38.650169,1199.768311,54.502853,1248.571899,0.000000,"scriptDone"};
item60[] = {"reissue_command",4,218,50.537159,1312.698730,143.059937,1379.516846,2.000000,"reissue" \n "command"};
item61[] = {"eject_crew_",2,250,-36.060608,1961.119141,53.939407,2011.119263,0.000000,"eject crew?"};
item62[] = {"_",4,218,-36.060600,2030.914673,53.939400,2080.914063,0.000000,""};
item63[] = {"onLanding",2,250,-40.558563,437.326904,49.441460,487.326935,0.000000,"onLanding"};
item64[] = {"scriptDone",4,218,-39.700874,499.938904,50.299118,549.938904,0.000000,"scriptDone"};
item65[] = {"onArrival",2,250,-37.985405,1670.693115,52.014610,1720.693115,0.000000,"onArrival"};
item66[] = {"scriptDone",4,218,-37.985390,1741.881958,52.014610,1791.881958,0.000000,"scriptDone"};
item67[] = {"keep_engine_on",4,218,-163.210205,713.477783,-73.210205,763.477783,1.000000,"keep" \n "engine on"};
item68[] = {"failed",4,218,-172.611252,530.762390,-82.611176,580.762390,1.000000,"failed"};
item69[] = {"retry",2,250,-199.871811,599.353394,-140.649734,627.369141,0.000000,"retry"};
item70[] = {"delay",4,218,-119.848923,621.337524,-68.541267,658.146912,0.000000,"delay"};
item71[] = {"_",2,250,-297.759888,1599.655029,-207.759857,1649.655029,0.000000,""};
item72[] = {"_",4,218,-297.525543,1673.653320,-207.525543,1723.653320,0.000000,""};
item73[] = {"exit",4,218,-430.476501,1599.073364,-340.476379,1649.073364,1.000000,"exit"};
item74[] = {"damaged__need_repair",2,250,-297.319122,1754.640015,-207.319138,1804.640015,0.000000,"damaged" \n "(need repair)"};
item75[] = {"_",4,218,-224.438492,1714.469238,-194.799774,1741.833740,0.000000,""};
item76[] = {"delay_loop_2",2,250,-166.441711,1716.954834,-95.304779,1741.489868,0.000000,"delay loop"};
item77[] = {"delay",4,218,-158.228455,1760.985840,-103.124878,1796.838623,0.000000,"delay"};
item78[] = {"repaired",4,218,-521.535400,1754.735840,-431.535126,1804.735840,1.000000,"repaired"};
item79[] = {"dead",4,218,-295.669250,1844.821533,-205.669266,1894.821533,2.000000,"dead"};
item80[] = {"onRepaired",2,250,-521.823120,1485.083008,-431.822784,1535.083008,0.000000,"onRepaired"};
item81[] = {"scriptDone",4,218,-521.823364,1267.215820,-431.822693,1317.215820,0.000000,"scriptDone"};
item82[] = {"",7,210,-254.595505,2240.043945,-246.595505,2248.043945,0.000000,""};
item83[] = {"",7,210,255.329376,2239.947754,263.329376,2247.947754,0.000000,""};
link0[] = {0,1};
link1[] = {1,2};
link2[] = {2,3};
link3[] = {2,4};
link4[] = {3,6};
link5[] = {4,5};
link6[] = {5,8};
link7[] = {6,7};
link8[] = {7,5};
link9[] = {8,9};
link10[] = {9,10};
link11[] = {9,13};
link12[] = {9,15};
link13[] = {9,46};
link14[] = {9,54};
link15[] = {9,55};
link16[] = {10,11};
link17[] = {11,12};
link18[] = {12,9};
link19[] = {13,63};
link20[] = {14,17};
link21[] = {14,32};
link22[] = {14,46};
link23[] = {14,68};
link24[] = {15,16};
link25[] = {17,18};
link26[] = {18,19};
link27[] = {18,34};
link28[] = {18,67};
link29[] = {19,56};
link30[] = {20,21};
link31[] = {20,36};
link32[] = {21,58};
link33[] = {22,23};
link34[] = {23,24};
link35[] = {24,25};
link36[] = {24,28};
link37[] = {24,38};
link38[] = {24,50};
link39[] = {24,60};
link40[] = {25,26};
link41[] = {26,27};
link42[] = {27,24};
link43[] = {28,29};
link44[] = {29,30};
link45[] = {29,42};
link46[] = {29,50};
link47[] = {30,65};
link48[] = {32,33};
link49[] = {33,16};
link50[] = {34,35};
link51[] = {35,33};
link52[] = {36,37};
link53[] = {37,35};
link54[] = {38,39};
link55[] = {39,37};
link56[] = {40,41};
link57[] = {40,44};
link58[] = {41,61};
link59[] = {42,43};
link60[] = {43,39};
link61[] = {44,45};
link62[] = {45,43};
link63[] = {46,48};
link64[] = {47,49};
link65[] = {48,47};
link66[] = {50,51};
link67[] = {51,52};
link68[] = {52,71};
link69[] = {54,5};
link70[] = {55,5};
link71[] = {56,57};
link72[] = {57,20};
link73[] = {58,59};
link74[] = {59,22};
link75[] = {60,22};
link76[] = {61,62};
link77[] = {62,31};
link78[] = {63,64};
link79[] = {64,14};
link80[] = {65,66};
link81[] = {66,40};
link82[] = {67,18};
link83[] = {68,69};
link84[] = {69,70};
link85[] = {70,14};
link86[] = {71,72};
link87[] = {71,73};
link88[] = {72,74};
link89[] = {73,53};
link90[] = {74,75};
link91[] = {74,78};
link92[] = {74,79};
link93[] = {75,76};
link94[] = {76,77};
link95[] = {77,74};
link96[] = {78,80};
link97[] = {79,82};
link98[] = {80,81};
link99[] = {81,22};
link100[] = {82,83};
link101[] = {83,45};
globals[] = {0.000000,0,0,0,0,640,480,1,92,6316128,1,-413.737732,383.515503,612.789856,-206.348099,765,755,1};
window[] = {0,-1,-1,-1,-1,894,119,1411,8,1,782};
*//*%FSM</HEAD>*/
class FSM
{
  fsmName = "RUBE_AI_HELO_evacuate";
  class States
  {
    /*%FSM<STATE "init">*/
    class init
    {
      name = "init";
      init = /*%FSM<STATEINIT""">*/"/*" \n
       "	Description:" \n
       "	 helo evacuate/reinforce fsm" \n
       "*/" \n
       "" \n
       "private [" \n
       "	""_vehicle"", ""_evacuate"", ""_reinforcements"", ""_landingDistance"", " \n
       "	""_arrivalDistance"", ""_landingAreaRadius"", ""_helipad""," \n
       "	""_landAt"", ""_parkAt"", ""_ejectCrew"", ""_exitOnFailure""," \n
       "	""_updateLandingPosition"", ""_disablePilot""," \n
       "	""_combatMode"", ""_behaviour""," \n
       "	""_onLand"", ""_onCrashPre"", ""_onCrashPost"", ""_onReinforce"", " \n
       "	""_onEvacuate"", ""_onRepaired"", ""_onArrival"", " \n
       "	""_onFailure"", ""_onSuccess""" \n
       "];" \n
       "" \n
       "_vehicle = objNull;" \n
       "_evacuate = []; // units to evacuate (load)" \n
       "_reinforcements = []; // units to reinforce (unload)" \n
       "" \n
       "_landingDistance = 200;" \n
       "_arrivalDistance = 50;" \n
       "_landingAreaRadius = 15;" \n
       "" \n
       "_helipad = createVehicle [""HeliHEmpty"", [0,0,0], [], 0, ""NONE""];" \n
       "" \n
       "_landAt = []; // position to land (evac/reinforce)" \n
       "_parkAt = []; // position to park after job is done." \n
       "_ejectCrew = true; // on success/back home" \n
       "_exitOnFailure = true; // or wait for repair aslong as vehicle is alive" \n
       "_updateLandingPosition = false; // update landAt with current evac group position" \n
       "_disablePilot = true; // disable pilots target magic.... :/" \n
       "" \n
       "_combatMode = ""GREEN"";" \n
       "_behaviour = ""AWARE"";" \n
       "" \n
       "// all event codes get passed:" \n
       "// all are spawned except onFailure and onSuccess" \n
       "/*" \n
       "	0: vehicle" \n
       "	1: evacuate (array of units)" \n
       "	2: reinforcements (array of units)" \n
       "*/" \n
       "" \n
       "_onLand = """"; " \n
       "_onCrashPre = """"; // prior to reinforce/evacuate landing" \n
       "_onCrashPost = """"; // after reinforce/evacuate landing" \n
       "_onReinforce = """"; " \n
       "_onEvacuate = """"; // pick up " \n
       "_onRepaired = """";" \n
       "_onArrival = """"; // get out (evacuated)" \n
       "_onFailure = """"; " \n
       "_onSuccess = """"; " \n
       "" \n
       "// read parameters" \n
       "{" \n
       "	switch (_x select 0) do" \n
       "	{" \n
       "		case ""vehicle"": { _vehicle = _x select 1; };" \n
       "		case ""reinforcements"": " \n
       "		{ " \n
       "			if ((typeName (_x select 1)) == ""GROUP"") then" \n
       "			{" \n
       "				_reinforcements = units (_x select 1);" \n
       "			} else" \n
       "			{" \n
       "				_reinforcements = _x select 1;" \n
       "			};" \n
       "		};" \n
       "		case ""evacuate"": " \n
       "		{ " \n
       "			if ((typeName (_x select 1)) == ""GROUP"") then" \n
       "			{" \n
       "				_evacuate = units (_x select 1);" \n
       "			} else" \n
       "			{" \n
       "				_evacuate = _x select 1;" \n
       "			};" \n
       "		};" \n
       "		case ""landingDistance"": { _landingDistance = _x select 1; };" \n
       "		case ""landAt"": { _landAt = _x select 1; };" \n
       "		case ""parkAt"": { _parkAt = _x select 1; };" \n
       "		case ""ejectCrew"": { _ejectCrew = _x select 1; };" \n
       "		case ""exitOnFailure"": { _exitOnFailure = _x select 1; };" \n
       "		case ""updateLandingPosition"": { _updateLandingPosition = _x select 1; };" \n
       "		case ""disablePilot"": { _disablePilot = _x select 1; };" \n
       "		case ""combatMode"": { _combatMode = _x select 1; };" \n
       "		case ""behaviour"": { _behaviour = _x select 1; };" \n
       "		case ""onLand"": { _onLand = _x select 1; };" \n
       "		case ""onCrash"": " \n
       "		{ " \n
       "			_onCrashPre = _x select 1; " \n
       "			_onCrashPost = _x select 1; " \n
       "		};" \n
       "		case ""onCrashPre"": { _onCrashPre = _x select 1; };" \n
       "		case ""onCrashPost"": { _onCrashPost = _x select 1; };" \n
       "		case ""onReinforce"": { _onReinforce = _x select 1; };" \n
       "		case ""onEvacuate"": { _onEvacuate = _x select 1; };" \n
       "		case ""onRepaired"": { _onRepaired = _x select 1; };" \n
       "		case ""onArrival"": { _onArrival = _x select 1; };" \n
       "		case ""onFailure"": { _onFailure = _x select 1; };" \n
       "		case ""onSuccess"": { _onSuccess = _x select 1; };" \n
       "	};" \n
       "} forEach _this;" \n
       "" \n
       "" \n
       "// defaults" \n
       "if ((count _landAt) == 0 && ((count _evacuate) > 0)) then" \n
       "{" \n
       "	_landAt = position (_evacuate select 0);" \n
       "};" \n
       "" \n
       "if ((count _parkAt) == 0) then" \n
       "{" \n
       "	_parkAt = position _vehicle;" \n
       "};" \n
       "" \n
       "" \n
       "// init" \n
       "private [" \n
       "	""_t"", ""_delay"", ""_landingTime"", ""_landingTimeout""," \n
       "	""_pilot"", ""_gunner"", ""_vehicle"", ""_group"", ""_crew"", " \n
       "	""_dontEngage"", ""_codeHandle"", ""_lastPos"", ""_landAt""" \n
       "];" \n
       "" \n
       "_t = time;" \n
       "_delay = 3 + (random 1);" \n
       "" \n
       "_landingTime = time;" \n
       "_landingTimeout = 60;" \n
       "" \n
       "_helipad setPos _landAt;" \n
       "" \n
       "_pilot = driver _vehicle;" \n
       "_gunner = gunner _vehicle;" \n
       "_group = group _pilot;" \n
       "_crew = crew _vehicle;" \n
       "_dontEngage = [_pilot];" \n
       "/*" \n
       "if (!(isNull _gunner)) then" \n
       "{" \n
       "	_dontEngage set [(count _dontEngage), _gunner];" \n
       "};" \n
       "*/" \n
       "" \n
       "_codeHandle =  0 spawn {};" \n
       "_lastPos = _landAt;" \n
       "" \n
       "" \n
       "" \n
       "// private functions" \n
       "private [" \n
       "	""_allIn"", ""_allOut"", ""_isDead"", ""_isCrashing""," \n
       "	""_updateLandAt""" \n
       "];" \n
       "" \n
       "// units => boolean" \n
       "_allIn = {" \n
       "	(({(alive _x) && ((vehicle _x) == _x)} count _this) == 0)" \n
       "};" \n
       "" \n
       "// units => boolean" \n
       "_allOut = {" \n
       "	(({(alive _x) && !((vehicle _x) == _x)} count _this) == 0)" \n
       "};" \n
       "" \n
       "// => boolean" \n
       "_isDead = {" \n
       "	(!(alive _pilot) || (!(alive _vehicle)))" \n
       "};" \n
       "" \n
       "// => boolean" \n
       "_isCrashing = {" \n
       "	((alive _pilot) && (!(canMove _vehicle) || !(alive _vehicle) || ((fuel _vehicle) < 0.001)))" \n
       "};" \n
       "" \n
       "// update landing position" \n
       "_updateLandAt = {" \n
       "	private [""_unit"", ""_positions"", ""_range"", ""_grad""];" \n
       "	_unit = objNull;" \n
       "	{" \n
       "		if (alive _x) exitWith" \n
       "		{" \n
       "			_unit = _x;" \n
       "		};" \n
       "	} forEach _evacuate;" \n
       "	if (!(isNull _unit)) then" \n
       "	{" \n
       "		_landAt = position _unit;" \n
       "		_positions = [];" \n
       "		_range = 100;" \n
       "		_grad = 0.15;" \n
       "" \n
       "		while {((count _positions) < 1)} do" \n
       "		{" \n
       "			_positions = [" \n
       "				[""position"", _landAt]," \n
       "				[""number"", 3]," \n
       "				[""objDistance"", _landingAreaRadius]," \n
       "				[""range"", [0, _range]]," \n
       "				[""maxGradient"", _grad]" \n
       "			] call RUBE_randomCirclePositions;" \n
       "" \n
       "			_range = _range * 1.25;" \n
       "			_grad = _grad + 0.01;" \n
       "		};" \n
       "" \n
       "		_landAt = _positions call RUBE_randomSelect;" \n
       "		_landAt set [2,0];" \n
       "		_helipad setPos _landAt;" \n
       "	};	" \n
       "};" \n
       "" \n
       "// clean up routine, called on fsm-exit" \n
       "_cleanUp = {" \n
       "	deleteVehicle _helipad;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "_">*/
        class _
        {
          priority = 0.000000;
          to="start_up";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "start_up">*/
    class start_up
    {
      name = "start_up";
      init = /*%FSM<STATEINIT""">*/"//_vehicle flyInHeight 0;" \n
       "_vehicle lock false;" \n
       "" \n
       "if (_disablePilot) then" \n
       "{" \n
       "	{" \n
       "		_x disableAI ""TARGET"";" \n
       "		_x disableAI ""AUTOTARGET"";" \n
       "	} forEach _dontEngage;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "reinforce__">*/
        class reinforce__
        {
          priority = 1.000000;
          to="board_vehicle";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(count _reinforcements) > 0"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "ready">*/
        class ready
        {
          priority = 0.000000;
          to="move_out";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "move_out">*/
    class move_out
    {
      name = "move_out";
      init = /*%FSM<STATEINIT""">*/"_vehicle flyInHeight 100;" \n
       "_lastPos = _landAt;" \n
       "" \n
       "[" \n
       "	[""group"", _group]," \n
       "	[""position"",_landAt]," \n
       "	[""type"", ""MOVE""]," \n
       "	[""speed"", ""FULL""]," \n
       "	[""combatMode"", _combatMode]," \n
       "	[""behaviour"", _behaviour]," \n
       "	[""completionRadius"", _landingDistance]" \n
       "] call RUBE_updateWaypoint;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "_">*/
        class _
        {
          priority = 0.000000;
          to="flying___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "board_vehicle">*/
    class board_vehicle
    {
      name = "board_vehicle";
      init = /*%FSM<STATEINIT""">*/"{" \n
       "	_x assignAsCargo _vehicle;" \n
       "} forEach _reinforcements;" \n
       "" \n
       "_reinforcements orderGetIn true;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "all_in">*/
        class all_in
        {
          priority = 0.000000;
          to="move_out";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(_reinforcements call _allIn)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "flying___">*/
    class flying___
    {
      name = "flying___";
      init = /*%FSM<STATEINIT""">*/"if (_updateLandingPosition) then" \n
       "{" \n
       "	[] call _updateLandAt;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "dead">*/
        class dead
        {
          priority = 4.000000;
          to="dead__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isDead)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "crash">*/
        class crash
        {
          priority = 3.000000;
          to="crashed__onCrashPre";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isCrashing)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "update_landing_p">*/
        class update_landing_p
        {
          priority = 2.000000;
          to="move_out";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((_landAt distance _lastPos) > 20)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "reissue_command">*/
        class reissue_command
        {
          priority = 2.000000;
          to="move_out";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((unitReady _pilot) && ((_vehicle distance _landAt) > _landingDistance))"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "arrived">*/
        class arrived
        {
          priority = 1.000000;
          to="onLanding";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(unitReady _pilot) || ((_vehicle distance _landAt) < _landingDistance)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "_">*/
        class _
        {
          priority = 0.000000;
          to="delay_loop";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "delay_loop">*/
    class delay_loop
    {
      name = "delay_loop";
      init = /*%FSM<STATEINIT""">*/"// update time" \n
       "_t = time;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "delay">*/
        class delay
        {
          priority = 0.000000;
          to="flying___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _t) > _delay"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "land">*/
    class land
    {
      name = "land";
      init = /*%FSM<STATEINIT""">*/"[" \n
       "	[""group"", _group]," \n
       "	[""position"",_landAt]," \n
       "	[""type"", ""TR UNLOAD""]" \n
       "	//[""type"", ""UNLOAD""]" \n
       "] call RUBE_updateWaypoint;" \n
       "" \n
       "_vehicle land ""GET IN"";" \n
       "" \n
       "{" \n
       "	if (_x != player) then" \n
       "	{" \n
       "		_x doMove ([_landAt, [7,7], [16,16]] call RUBE_randomizePos);" \n
       "	};" \n
       "} forEach _evacuate;" \n
       "" \n
       "_landingTime = time;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "dead">*/
        class dead
        {
          priority = 3.000000;
          to="dead__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isDead)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "crash">*/
        class crash
        {
          priority = 3.000000;
          to="crashed__onCrashPre";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isCrashing)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "failed">*/
        class failed
        {
          priority = 1.000000;
          to="retry";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((landResult _vehicle) == ""NotFound"") || ((time - _landingTime) > _landingTimeout)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "on_ground">*/
        class on_ground
        {
          priority = 0.000000;
          to="reinforce";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(((getPosATL _vehicle) select 2) < 1.0) && ((speed _vehicle) < 10) && ((landResult _vehicle) == ""Found"")"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "dead__onFailure">*/
    class dead__onFailure
    {
      name = "dead__onFailure";
      init = /*%FSM<STATEINIT""">*/"// run onFailure" \n
       "if ((typeName _onFailure) == ""CODE"") then" \n
       "{" \n
       "	[_vehicle, _evacuate, _reinforcements] call _onFailure;" \n
       "};" \n
       "" \n
       "// clean up routine" \n
       "[] call _cleanUp;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "reinforce">*/
    class reinforce
    {
      name = "reinforce";
      init = /*%FSM<STATEINIT""">*/"_vehicle flyInHeight 0;" \n
       "_vehicle forceSpeed 0;" \n
       "" \n
       "_vehicle engineOn true;" \n
       "" \n
       "{" \n
       "	unassignVehicle _x;" \n
       "	doGetOut _x;" \n
       "} forEach _reinforcements;" \n
       "" \n
       "_reinforcements orderGetIn false;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "dead">*/
        class dead
        {
          priority = 2.000000;
          to="dead__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isDead)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "keep_engine_on">*/
        class keep_engine_on
        {
          priority = 1.000000;
          to="reinforce";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"!(isEngineOn _vehicle)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"_vehicle engineOn true;"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "all_out">*/
        class all_out
        {
          priority = 0.000000;
          to="onReinforce";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(_reinforcements call _allOut)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "evacuate">*/
    class evacuate
    {
      name = "evacuate";
      init = /*%FSM<STATEINIT""">*/"_vehicle engineOn true;" \n
       "_evacuate allowGetIn true;" \n
       "" \n
       "{" \n
       "	_x assignAsCargo _vehicle;" \n
       "} forEach _evacuate;" \n
       "" \n
       "_evacuate orderGetIn true;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "dead">*/
        class dead
        {
          priority = 2.000000;
          to="dead__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isDead)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "all_in">*/
        class all_in
        {
          priority = 0.000000;
          to="onEvacuate";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(_evacuate call _allIn)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "fly_home">*/
    class fly_home
    {
      name = "fly_home";
      init = /*%FSM<STATEINIT""">*/"_vehicle flyInHeight 100;" \n
       "_vehicle forceSpeed -1;" \n
       "" \n
       "[" \n
       "	[""group"", _group]," \n
       "	[""position"",_parkAt]," \n
       "	[""type"", ""MOVE""]," \n
       "	[""speed"", ""FULL""]," \n
       "	[""completionRadius"", _landingDistance]" \n
       "] call RUBE_updateWaypoint;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "_">*/
        class _
        {
          priority = 0.000000;
          to="flying_home___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "flying_home___">*/
    class flying_home___
    {
      name = "flying_home___";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "dead">*/
        class dead
        {
          priority = 4.000000;
          to="dead__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isDead)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "crash">*/
        class crash
        {
          priority = 3.000000;
          to="crashed__onCrashPost";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isCrashing)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "reissue_command">*/
        class reissue_command
        {
          priority = 2.000000;
          to="fly_home";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((unitReady _pilot) && ((_vehicle distance _parkAt) > _landingDistance))"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "arrived">*/
        class arrived
        {
          priority = 1.000000;
          to="land_1";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(unitReady _pilot)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "_">*/
        class _
        {
          priority = 0.000000;
          to="delay_loop_1";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "delay_loop_1">*/
    class delay_loop_1
    {
      name = "delay_loop_1";
      init = /*%FSM<STATEINIT""">*/"// update time" \n
       "_t = time;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "delay">*/
        class delay
        {
          priority = 0.000000;
          to="flying_home___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _t) > _delay"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "land_1">*/
    class land_1
    {
      name = "land_1";
      init = /*%FSM<STATEINIT""">*/"[" \n
       "	[""group"", _group]," \n
       "	[""position"",_parkAt]," \n
       "	[""type"", ""TR UNLOAD""]" \n
       "] call RUBE_updateWaypoint;" \n
       "" \n
       "_vehicle land ""LAND"";"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "dead">*/
        class dead
        {
          priority = 3.000000;
          to="dead__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isDead)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "crash">*/
        class crash
        {
          priority = 3.000000;
          to="crashed__onCrashPost";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isCrashing)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "on_ground">*/
        class on_ground
        {
          priority = 0.000000;
          to="onArrival";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((getPosATL _vehicle) select 2) < _arrivalDistance"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "done__onSuccess">*/
    class done__onSuccess
    {
      name = "done__onSuccess";
      init = /*%FSM<STATEINIT""">*/"// run onSuccess" \n
       "if ((typeName _onSuccess) == ""CODE"") then" \n
       "{" \n
       "	[_vehicle, _evacuate, _reinforcements] call _onSuccess;" \n
       "};" \n
       "" \n
       "// clean up routine" \n
       "[] call _cleanUp;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "disembark">*/
    class disembark
    {
      name = "disembark";
      init = /*%FSM<STATEINIT""">*/"{" \n
       "	unassignVehicle _x;" \n
       "	doGetOut _x;" \n
       "} forEach _evacuate;" \n
       "" \n
       "_evacuate orderGetIn false;" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "dead">*/
        class dead
        {
          priority = 2.000000;
          to="dead__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isDead)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "all_out">*/
        class all_out
        {
          priority = 1.000000;
          to="eject_crew_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(_evacuate call _allOut)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "crashed__onCrashPre">*/
    class crashed__onCrashPre
    {
      name = "crashed__onCrashPre";
      init = /*%FSM<STATEINIT""">*/"// run onCrashPre code" \n
       "if ((typeName _onCrashPre) == ""CODE"") then" \n
       "{" \n
       "	_codeHandle = [_vehicle, _evacuate, _reinforcements] spawn _onCrashPre;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "scriptDone">*/
        class scriptDone
        {
          priority = 0.000000;
          to="failure__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"scriptDone _codeHandle"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "failure__onFailure">*/
    class failure__onFailure
    {
      name = "failure__onFailure";
      init = /*%FSM<STATEINIT""">*/"// run onFailure" \n
       "if ((typeName _onFailure) == ""CODE"") then" \n
       "{" \n
       "	[_vehicle, _evacuate, _reinforcements] call _onFailure;" \n
       "};" \n
       "" \n
       "// clean up routine" \n
       "[] call _cleanUp;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "crashed__onCrashPost">*/
    class crashed__onCrashPost
    {
      name = "crashed__onCrashPost";
      init = /*%FSM<STATEINIT""">*/"// run onCrashPost code" \n
       "if ((typeName _onCrashPost) == ""CODE"") then" \n
       "{" \n
       "	_codeHandle = [_vehicle, _evacuate, _reinforcements] spawn _onCrashPost;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "scriptDone">*/
        class scriptDone
        {
          priority = 0.000000;
          to="_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"scriptDone _codeHandle"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "failure__onFailure_1">*/
    class failure__onFailure_1
    {
      name = "failure__onFailure_1";
      init = /*%FSM<STATEINIT""">*/"// run onFailure" \n
       "if ((typeName _onFailure) == ""CODE"") then" \n
       "{" \n
       "	[_vehicle, _evacuate, _reinforcements] call _onFailure;" \n
       "};" \n
       "" \n
       "// clean up routine" \n
       "[] call _cleanUp;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "onReinforce">*/
    class onReinforce
    {
      name = "onReinforce";
      init = /*%FSM<STATEINIT""">*/"// run onReinforce code" \n
       "if ((typeName _onReinforce) == ""CODE"") then" \n
       "{" \n
       "	_codeHandle = [_vehicle, _evacuate, _reinforcements] spawn _onReinforce;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "scriptDone">*/
        class scriptDone
        {
          priority = 0.000000;
          to="evacuate";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"scriptDone _codeHandle"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "onEvacuate">*/
    class onEvacuate
    {
      name = "onEvacuate";
      init = /*%FSM<STATEINIT""">*/"// run onEvacuate code" \n
       "if ((typeName _onEvacuate) == ""CODE"") then" \n
       "{" \n
       "	_codeHandle = [_vehicle, _evacuate, _reinforcements] spawn _onEvacuate;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "scriptDone">*/
        class scriptDone
        {
          priority = 0.000000;
          to="fly_home";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"scriptDone _codeHandle"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "eject_crew_">*/
    class eject_crew_
    {
      name = "eject_crew_";
      init = /*%FSM<STATEINIT""">*/"if (_ejectCrew) then" \n
       "{" \n
       "	[" \n
       "		[""group"", _group]," \n
       "		[""position"",_parkAt]," \n
       "		[""type"", ""GETOUT""]" \n
       "	] call RUBE_updateWaypoint;" \n
       "" \n
       "	{" \n
       "		unassignVehicle _x;" \n
       "		doGetOut _x;" \n
       "	} forEach _crew;" \n
       "" \n
       "	_crew orderGetIn false;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "_">*/
        class _
        {
          priority = 0.000000;
          to="done__onSuccess";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "onLanding">*/
    class onLanding
    {
      name = "onLanding";
      init = /*%FSM<STATEINIT""">*/"// run onLand code" \n
       "if ((typeName _onLand) == ""CODE"") then" \n
       "{" \n
       "	_codeHandle = [_vehicle, _evacuate, _reinforcements] spawn _onLand;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "scriptDone">*/
        class scriptDone
        {
          priority = 0.000000;
          to="land";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"scriptDone _codeHandle"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "onArrival">*/
    class onArrival
    {
      name = "onArrival";
      init = /*%FSM<STATEINIT""">*/"// run onArrival code" \n
       "if ((typeName _onArrival) == ""CODE"") then" \n
       "{" \n
       "	_codeHandle = [_vehicle, _evacuate, _reinforcements] spawn _onArrival;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "scriptDone">*/
        class scriptDone
        {
          priority = 0.000000;
          to="disembark";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"scriptDone _codeHandle"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "retry">*/
    class retry
    {
      name = "retry";
      init = /*%FSM<STATEINIT""">*/"// update time" \n
       "_t = time;" \n
       "" \n
       "[] call _updateLandAt;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "delay">*/
        class delay
        {
          priority = 0.000000;
          to="land";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _t) > _delay"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "_">*/
    class _
    {
      name = "_";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "exit">*/
        class exit
        {
          priority = 1.000000;
          to="failure__onFailure_1";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_exitOnFailure"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "_">*/
        class _
        {
          priority = 0.000000;
          to="damaged__need_repair";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "damaged__need_repair">*/
    class damaged__need_repair
    {
      name = "damaged__need_repair";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "dead">*/
        class dead
        {
          priority = 2.000000;
          to="dead__onFailure";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"([] call _isDead)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "repaired">*/
        class repaired
        {
          priority = 1.000000;
          to="onRepaired";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"canMove _vehicle"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "_">*/
        class _
        {
          priority = 0.000000;
          to="delay_loop_2";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "delay_loop_2">*/
    class delay_loop_2
    {
      name = "delay_loop_2";
      init = /*%FSM<STATEINIT""">*/"// update time" \n
       "_t = time;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "delay">*/
        class delay
        {
          priority = 0.000000;
          to="damaged__need_repair";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time - _t) > _delay"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "onRepaired">*/
    class onRepaired
    {
      name = "onRepaired";
      init = /*%FSM<STATEINIT""">*/"// run onRepaired code" \n
       "if ((typeName _onRepaired) == ""CODE"") then" \n
       "{" \n
       "	_codeHandle = [_vehicle, _evacuate, _reinforcements] spawn _onRepaired;" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "scriptDone">*/
        class scriptDone
        {
          priority = 0.000000;
          to="fly_home";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"scriptDone _codeHandle"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
  };
  initState="init";
  finalStates[] =
  {
    "dead__onFailure",
    "done__onSuccess",
    "failure__onFailure",
    "failure__onFailure_1",
  };
};
/*%FSM</COMPILE>*/